## 2.1 시계열의 정의

* 시간에 따라 관측된 자료
* 관측 시점과 시점 사이의 간격(시차)이 중요
* 횡단면은 '한 시점'의 데이터 → 횡단면 데이터를 모으면 '패털 데이터'
* 경제/물리/경영/인구/통신공학/사회 등 다양한 시계열 데이터 존재



## 2.2 시계열 도표

* 시간의 경과에 따라 시계열 자료값이 변하는 것을 그린 그래프
  * x축은 시간, y축은 관측값



## 2.3 시계열의 변동요인

* 주파수 영역: 주기적으로 반복되는 정보
* 시간영역: 시간에 따라 전개되는 정보
  * 중요한 건 우리가 무엇이 주파수이고 시간인지 알수가 없다는 것
* 그래서, 보통 경제시게열은 변동주기에 따라 아래와 같이 구분
  * 추세변동 : 10년 이상 주기 (인구/기술 변화)
  * 순환변동: 2~5년 주기 (경기 순환)
  * 계절변동: 1년 주기 (계절변화)
  * 불규칙변동: 주기 불분명(파업, 태풍 등)
* 시계열은 변동요인들이 '승법형', '가법형', '로그가법형'으로 결합된다고 가정하고 있다.
  * 승법모형: $Y_t = T_t \cdot C_t \cdot S_t \cdot I_t$
  * 가법모형: $Y_t = T_t + C_t + S_t + I_t$
  * 로그가법모형: $lnY_t = lnT_t + lnC_t + lnS_t + lnI_t$ (승법모형을 로그변환한 모형)
  * 우리가 관측 가능한 것은 $Y_t$지만 추후에 위 4가지 요인 추출하는 법을 배울 것



## 2.4 변수변환과 달력조정

* 데이터를 있는 그대로 보면 좋겠지만, 조정하면 더욱 근원적인 변동을 볼 수 있게 된다
  * 로그변환하면 작은 것은 크게, 큰 것은 적게 만든다 (조금 더 선형적으로 만들고, 단위도 조정시켜준다, 탄력성 개념도 함께)
  * 대표적 변수변환 방법으로 '역변환', '제곱근변환', 'Box-Cox변환'이 있다.
* 달력조정
  * 시계열 데이터는 해당 월 길이에 따라 변동 가능 (월 생산량을 생각하면, 2월의 경우 생산량은 매우 적을 것)
  * 그러므로,  기간 차이로 인해 발생하는 변동을 표준화하기 위해 조정
    * 예: $Y_t = Z_t \times \frac{t월의 영업일수}{t월의 평균 영업일수}$



## 2.5 안정 시계열과 불안정 시계열

* 시계열의 구분
  * 안정시계열(Stationary): 시계열의 움직임이 구간을 달리하더라도 매 구간별로 특성이 통일
  * 불안정 시계열(Nonstationary): 시계열 평균 및 분산이 시간에 따라 변화하는 시계열
    * 시계열에 대한 계량 경제 분석 이론은 안정시계열을 중심으로 정립되어있다. 
    * 그래서, 현실의 불안정 시계열은 차수, 변수변환등으로 안전시계열로 전환해야 한다.



## 2.6 차분

* 현재시점 자료에서 인접시점의 자료를 차감 (전기대비 증감 파악)
  * 1차 차분: $\Delta Y_t = Y_t - Y_{t-1}$
  * 계절차분: $\Delta^4 Y_t = Y_t - Y_{t-4}$ (계절성 제거)
  * 전년동기와 차분하기도 함
  * 차분은 추세 시계열을 추세가 없는 시계열로 전환 
    * But, 단기 변동을 증폭시키는 약점을 보유
* 시계열 증감률: 시계열을 log 변환한 후 차분한 것과 근사적으로 같으므로 증감률도 일종의 차분으로 볼 수 있음
  * $log(Y_t) - log(Y_{t-1}) = log(\frac{Y_t}{Y_{t-1}}) = log(1+\frac{Y_t - Y_{t-1}}{Y_{t-1}}) \sim \frac{Y_t-Y_{t-1}}{Y_{t-1}}$
  * 테일러 정리에 의해 근사하는 것



## 2.7 평활화

* 시계열을 분석하다 보면, 시계열 내 불규칙 변동요인, 계절변동요인 등 주기가 짧은 변동요인으로 인해 시계열 흐름을 파악하기 어려울 때가 있다
* 전체적인 흐름을 보기 위해 '평활화' 진행
  * 중심화 이동평균: 단기변동요인을 시차구조 변경없이 제거, But 시작/끝에 대해서는 알 수 없음
  * 후방이동평균: 주가지수 등 최근시점의 불확실성 제거 But, 후행하는 단점
  * 가중이동평균: 항마다 가중치를 달리하여 가중 이동 평균 진행
* 여러가지 이동평균
  * 이중 이동평균: 이동평균한 값을 다시 이동평균한 것
    * 이동평균항 수를 늘리면 보다 장기적인 변동을 파악
    * $Y_3 = \frac{\frac{Z_1 + Z_2 + Z_3}{3} + \frac{Z_2 + Z_3 + Z_4}{3} + \frac{Z_3 + Z_4 + Z_5}{3}}{3} = \frac{(Z_1 + 2Z_2 + 3Z_3 + 2Z_4 + Z_5)}{9}$
    * 결국 가중이동평균임



#### 결론적으로 차분은 장기적 추세 제거, 단기적 추세 증폭, 평활화는 단기적 추세 제거 장기적 추세를 더욱 분명하게 보여줌





~~~R
df <- read.csv('gdcp.csv')

# 1961년부터 4개 분기를 주기로 하여 시계열 자료 생성
gdp <- ts(df, start=1961, frequency = 4)
plot(gdp[, 1], ylab='GDP(조원)', xlab = '연도', col='black')

# 5분기 중심화 이동평균 생성
ww = c(.5, 1, 1, 1, .5)
gdpm5 = filter(gdp, sides=2, ww/sum(ww)) # filter의 파라미터는 시계열자료, 중심화이동평균, 가중치 순

# 로그 차분 생성 (증감률)
dlgdp1 = diff(log(gdp))
dlgdp4 = diff(log(gdp), 4) # 4차 차분

par(mfrow = c(2,2))
plot(gdp, main='GDP', ylab = ' ', xlab = 'YEAR')
plot(gdpm5, main='GDPM5', ylab = ' ', xlab = 'YEAR')
plot(dlgdp1, main='diff(log(GDP))', ylab = ' ', xlab = 'YEAR') # 추세 요인 제거 > 계절변동요인은 더 잘 보임
plot(dlgdp4, main='diff(log(GDP),4)', ylab = ' ', xlab = 'YEAR',col='purple') # 추세/계절변동 요인 제거

# 계절 변동조절 겹쳐 함께 그리기
df$gdpsa <- gdpm5
gdp <- ts(df, start=1961, frequency = 4)

par(mfrow = c(1,1))
plot(gdp[, 1], ylab = 'GDP(조원)', xlab = '연도', col='black')
lines(gdp[, 2], col = 'mediumpurple')

~~~



